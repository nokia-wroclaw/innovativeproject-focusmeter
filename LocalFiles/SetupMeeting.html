<!DOCTYPE html>
<!--
*Panel For Creating and Setting up the new Meeting in Focus Meter System
*author: Maciej Baj

-->
<html>
	<head>
		<meta name="viewport" content="width=320, user-scalable=no">
		<meta http-equiv="Content-type" content="text/html; charset=utf-8">
		<title>Focus Meter</title>
        <link rel="stylesheet" href="./css/bootstrap.css" type="text/css">
        <link rel="stylesheet" href="./js/jquery-ui.css" type="text/css" media="screen" title="no title">
        <link rel="stylesheet" href="./js/jquery.ptTimeSelect.css" type="text/css" media="screen" title="no title">
        
	</head>
<body>

    <div class="row">
        <div class="col-sm-offset-4 col-sm-4 .col-xs-12">
            <div class="jumbotron">
                <h1>Focus Meter</h1>
                <p>Create new meeting</p>
            </div>

        </div>
    </div>
    <br />
    <div class="row">
        <h3 class="col-sm-offset-3 col-sm-1 col-xs-offset-1 col-xs-2" style="color: whitesmoke; font-size: medium; text-align: right; ">Code:</h3>
        <input class="col-sm-1 col-xs-2 input enter-code-field" readonly maxlength="1" required type="text" id="code_1">


        <input class="col-sm-1 col-xs-2 input enter-code-field" readonly maxlength=" 1" required type="text" id="code_2">

        <input class="col-sm-1 col-xs-2 input enter-code-field" readonly maxlength="1" required type="text" id="code_3">


        <input class="col-sm-1 col-xs-2  input enter-code-field" readonly maxlength="1" required type="text" id="code_4">

    </div>

    <br />

    <div class="row">
        <h3 class="col-sm-offset-4 col-sm-1 col-xs-offset-1 col-xs-2" style="color: whitesmoke; font-size: medium; text-align: right; ">Title:</h3>
        <input class="col-sm-3 col-xs-8 input-lg" type="text" id="title" style="text-align: center" value="" maxlength="40" required />
    </div><br />
    <div class="row">
        <h3 class="col-sm-offset-4 col-sm-1 col-xs-offset-1 col-xs-2" style="color: whitesmoke; font-size: medium; text-align: right; ">Date:</h3>
        <input class="col-sm-3 col-xs-8 input-lg" type="text" id="datepicker" autocomplete="off" name="Date" maxlength="10" required />
    </div><br />
    <div class="row">
        <h3 class="col-sm-offset-4 col-sm-1 col-xs-offset-1 col-xs-2" style="color: whitesmoke; font-size: medium; text-align: right; ">From</h3>
        <input class="col-sm-1 col-xs-3 input-lg" type="text" id="startHour" autocomplete="off" name="Hour" maxlength="8" required />

        <h3 class="col-sm-1 col-xs-2" style="color: whitesmoke; font-size: medium; text-align: center; ">To</h3>
        <input class="col-sm-1 col-xs-3 input-lg" type="text" id="endHour" autocomplete="off" name="Hour" maxlength="8" required />

    </div>
    <div class="row">
        <div class="col-sm-offset-4 col-sm-4 .col-xs-12">
            <br />
            <input type="button" class="btn btn-lg btn-success btn-block" value="CREATE" />
            <br />
            <input type="submit" class="btn btn-lg btn-warning btn-block" onclick="goBackToStartScreen()" value="CANCEL" />
        </div>
    </div>



            <script src="./js/jquery-1.8.2.js"></script>
            <script src="./js/jquery-ui-1.8.20.js"></script>
            <script src="./js/jquery.ptTimeSelect.js"></script>
            <script src="./js/formValidation/jqBootstrapValidation.js"></script>
            <script type="text/javascript">


                $(function () {
                    $("#title , #datepicker, #startHour, #endHour").jqBootstrapValidation();
                });

                function goBackToStartScreen() {
                    window.location = './index.html';
                }

                $(document).ready(function () {


                    $('#datepicker').datepicker({ dateFormat: 'dd/mm/yy' }).val();

                    $('#startHour').ptTimeSelect({
                        containerClass: "timeCntr",
                        containerWidth: "350px",
                        setButtonLabel: "Select",
                        minutesLabel: "min",
                        hoursLabel: "Hrs"
                    });

                    $('#endHour').ptTimeSelect();

                    $(".btn-success").click(function () {
                        var date = $("#datepicker").val();

                        var title = $("#title").val();

                        var startHour = $("#startHour").val();

                        var endHour = $("#endHour").val();

                        var mac = "12-32-43-54-65-76";



                        $.ajax({
                            type: "POST",
                            url: "http://156.17.234.85:3000/addMeeting",
                            data: {
                                "date": date,
                                "title": title,
                                "startHour": startHour,
                                "endHour": endHour,
                                "mac": mac
                            },
                            processData: true,
                            success: function (data) {
                                alert("Utworzono spotkanie! Kod spotkania: " + data.meetingCode);
                                $("#code_1").val(data.meetingCode.charAt(0));
                                $("#code_2").val(data.meetingCode.charAt(1));
                                $("#code_3").val(data.meetingCode.charAt(2));
                                $("#code_4").val(data.meetingCode.charAt(3));


                            },
                            error: function (jqXHR, textStatus, errorThrown) {
                                alert("Error, status: " + textStatus + ", errorThrown: " + errorThrown);
                            }
                        });
                    });
                });



            </script>

</body>
</html>
